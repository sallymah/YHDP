[main] 20170622 09:42:13 INFO  AbstractBatchBasic   L:97   - begin running
[main] 20170622 09:42:19 WARN  DBService            L:794  - DBCP borrow connection time: 6031 ms. batch
[main] 20170622 09:42:19 DEBUG TbBatchResultMgr     L:60   - sql: INSERT INTO TB_BATCH_RESULT(PROGRAM_NAME, START_DATE, START_TIME, END_DATE, END_TIME, WORK_FLAG, RCODE, ERROR_DESC, PAR_MON, PAR_DAY, LINK_CONTROL, JOB_ID, JOB_TIME, MEM_ID, RECOVER_VALUE) VALUES ('FtpIn', '20170622', '094213', '', '', '0', '0000', '', '06', '22', 'N', '100', '0001', '', '')
[main] 20170622 09:42:19 DEBUG TbBatchResultMgr     L:64   - TB_BATCH_RESULT: 1 record inserted
[main] 20170622 09:42:19 DEBUG TbBatchResultMgr     L:65   - [TbBatchResultInfo  sProgramName:FtpIn sStartDate:20170622 sStartTime:094213 sEndDate: sEndTime: sWorkFlag:0 sRcode:0000 sErrorDesc: sParMon:06 sParDay:22 sLinkControl:N sJobId:100 sJobTime:0001 sMemId: sRecoverValue:]
[main] 20170622 09:42:19 WARN  DBService            L:794  - DBCP borrow connection time: 594 ms. common
[main] 20170622 09:42:19 DEBUG TbRcodeConfigMgr     L:1007 - sql: SELECT ROWID, RCODE, RCODE_DESC, BALANCE_FLAG, SUMMARY_FLAG, SETTLEMENT_FLAG, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME FROM TB_RCODE_CONFIG ORDER BY RCODE
[main] 20170622 09:42:19 DEBUG TbRcodeConfigMgr     L:1015 - TB_RCODE_CONFIG: 5 records exist
[main] 20170622 09:42:19 DEBUG TbRcodeConfigMgr     L:1016 - [[TbRcodeConfigInfo  sRcode:2191 sRcodeDesc:卡號不存在 sBalanceFlag:0 sSummaryFlag:0 sSettlementFlag:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime:], [TbRcodeConfigInfo  sRcode:2192 sRcodeDesc:卡片狀態不合法 sBalanceFlag:0 sSummaryFlag:0 sSettlementFlag:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime:], [TbRcodeConfigInfo  sRcode:2193 sRcodeDesc:特店不存在 sBalanceFlag:0 sSummaryFlag:0 sSettlementFlag:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime:], [TbRcodeConfigInfo  sRcode:2194 sRcodeDesc:端末機不存在 sBalanceFlag:0 sSummaryFlag:0 sSettlementFlag:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime:], [TbRcodeConfigInfo  sRcode:2195 sRcodeDesc:取消交易查無原始交易 sBalanceFlag:0 sSummaryFlag:0 sSettlementFlag:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime:]]
[main] 20170622 09:42:19 DEBUG TbSysConfigMgr       L:963  - sql: SELECT ROWID, PARM, VALUE, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, PURPOSE_DESC FROM TB_SYS_CONFIG ORDER BY PARM
[main] 20170622 09:42:19 DEBUG TbSysConfigMgr       L:971  - TB_SYS_CONFIG: 79 records exist
[main] 20170622 09:42:19 DEBUG TbSysConfigMgr       L:972  - [[TbSysConfigInfo  sParm:ALL_MEMBER sValue:99999999 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<OBUR> 主檔設定時, 以一個特殊值代表所有參加單位], [TbSysConfigInfo  sParm:APPLET_VERSION sValue:000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:卡片格式版本預設值], [TbSysConfigInfo  sParm:APPOINT_LIST_CANCEL_AUTO_BAL_UPDATE sValue:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 指定回饋名單取消, 若回饋已被下載, 系統不會自動負補登; 0表不會自動負補登, 1表會自動負補登], [TbSysConfigInfo  sParm:APPOINT_RELOAD_IMPORT sValue:~/UPLOAD/APPOINTRELOAD/ sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:指定加值匯入, 上傳檔案用的根目錄], [TbSysConfigInfo  sParm:AUTO_SETTLE_DAY_E sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 自動結帳往前推天數。], [TbSysConfigInfo  sParm:AWARD_BONUS_AMT_CAN_EXCEED_MAX_LIMIT sValue:Y sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<C> 若之前的回饋加上本次回饋的點數或COUPON數量超過活動規定的上限時，回饋數量是否能超過上限, Y表可以超過, N表不能超過], [TbSysConfigInfo  sParm:BAD_BONUS_DAY sValue:7 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B>點數失效多久後,要處理餘額為負的資料], [TbSysConfigInfo  sParm:BAL_TRANSFER_ALLOWDAY sValue:999 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 餘額轉置有效結束日為永久有效(99991231); 或者, 以有效起始日之後N天為結束日], [TbSysConfigInfo  sParm:BAL_TRANSFER_DAY sValue:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<BU> 餘額轉置設定後N天可以到EDC進行餘額轉置], [TbSysConfigInfo  sParm:BATCH_RPT_PATH sValue:/home/svcadmin/REPORT/Output/BATCH_DATE/EXTERNAL/YHDP/ sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 報表產生的路徑], [TbSysConfigInfo  sParm:BATCH_RPT_PATH2 sValue:/home/svcadmin/REPORT/Output/BATCH_DATE/INTERNAL/YHDP_INTERNAL/ sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 報表產生的路徑(第二路徑)], [TbSysConfigInfo  sParm:BLACKLIST_IMPORT sValue:~/Upload/Blacklist/ sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:黑名單匯入, 上傳檔案用的根目錄], [TbSysConfigInfo  sParm:BLACKLIST_LIMIT_DAY sValue:  sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O> ONLINE檢查黑名單版本，設定黑名單版本日期N天內有效(空值為不檢核)], [TbSysConfigInfo  sParm:BONUS_EXTEND_CHANNEL sValue:B sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 晶片紅利時, Coupon延展效期透過何種方式下載, B表補登, A表指定加值], [TbSysConfigInfo  sParm:BONUS_EXTEND_DAY sValue:35 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B>點數失效多久後, 要開始延展點數效期的, 設定一個時間避免有些離線交易未結帳上來], [TbSysConfigInfo  sParm:CANCEL_FLAG sValue:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 原交易取消後，原交易與取消交易是否清算及計算手續費, 0表不清算, 1表要清算], [TbSysConfigInfo  sParm:CAP_TXN_IMPORT sValue:~/UPLOAD/CapTxn/ sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:人工簽單匯入, 上傳檔案用的根目錄], [TbSysConfigInfo  sParm:CARD_FEE_BONUS_ID sValue:0000000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<OUB> 同步新增到TB_BONUS], [TbSysConfigInfo  sParm:CARD_RETURN_BONUS_ID sValue:0000000001 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<OUB> 同步新增到TB_BONUS], [TbSysConfigInfo  sParm:CHK_FIRMWARE_VER sValue:  sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O> 檢查FIRMWARE可連線的版本(不得<此版本)], [TbSysConfigInfo  sParm:CHK_POSAPI_VER sValue:  sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O> 檢查POS API可連線的版本(不得<此版本)], [TbSysConfigInfo  sParm:CLEAN_AFTER_DAY sValue:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> inactive客戶終止日期後N天清除所屬的點數/點券], [TbSysConfigInfo  sParm:COUPON_BAL_UPDATE_FLAG sValue:4 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O>晶片紅利: 點券不夠扣處理原則,1: 正的足以抵掉此筆負補登才帶下去,2: 正的有多少扣多少, 其餘INSERT負補登(狀態為0),3: 主機餘額有多少扣多少, 其餘INSERT負補登(狀態為0),4: 永遠不帶下去(狀態為F)], [TbSysConfigInfo  sParm:CUSTOMER_REPROT_URL sValue:http:// sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:客製化報表下載功能的URL], [TbSysConfigInfo  sParm:CUST_IV sValue:0106050401030303 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:TB_CUST加解密IV], [TbSysConfigInfo  sParm:CUST_KEY sValue:0DA96BB119FA1ED8DD933DEB sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:TB_CUST加解密KEY], [TbSysConfigInfo  sParm:CUT_TIME_A sValue:000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 調帳交易在程式執行時，從現在往前找這個時間點(含)，之前未過檔的交易才過檔, 設成000000表未過檔的資料都過檔], [TbSysConfigInfo  sParm:CUT_TIME_C sValue:000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 人工簽單交易在程式執行時，從現在往前找這個時間點(含)，之前未過檔的交易才過檔, 設成000000表未過檔的資料都過檔], [TbSysConfigInfo  sParm:CUT_TIME_E sValue:000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> EDC交易在程式執行時，從現在往前找這個時間點(含)，之前未過檔的交易才過檔, 設成000000表未過檔的資料都過檔], [TbSysConfigInfo  sParm:CUT_TIME_I sValue:235959 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> Web Service在程式執行時，從現在往前找這個時間點(含)，之前未過檔的交易才過檔, 設成000000表未過檔的資料都過檔], [TbSysConfigInfo  sParm:CUT_UNBALANCED sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 不平帳交易的交易是否過檔, 0表不過檔, 1表要過檔], [TbSysConfigInfo  sParm:END_DATE sValue:99991231 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:永久有效結束日期], [TbSysConfigInfo  sParm:EXTRA_PERCENTAGE sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:每張額外製卡百分比], [TbSysConfigInfo  sParm:EX_MEM_ID sValue:00001001 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 紅利交換單位], [TbSysConfigInfo  sParm:FTP_REFILE_DEL_DAYS sValue:3 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> Ftp重複上傳檔案刪除幾天前重復檔案], [TbSysConfigInfo  sParm:FTP_RETRY_COUNT sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> Ftp Retry 次數], [TbSysConfigInfo  sParm:FTP_RETRY_SLEEP sValue:3000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> Ftp Retry sleep 時間(ms)], [TbSysConfigInfo  sParm:FUNC sValue:0000110001111111111111111111111111100000 sUptUserid: sUptDate: sUptTime: sAprvUserid:20150528 sAprvDate: sAprvTime: sPurposeDesc:Online Default TERM.FUNC], [TbSysConfigInfo  sParm:GEN_EXP_RPT_DAY sValue:30 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 到期卡差異匯出N日前], [TbSysConfigInfo  sParm:HOLIDAY sValue:06 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<U>設定星期六為放假日], [TbSysConfigInfo  sParm:INIT_CARD_STATUS sValue:3 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 匯入「新卡通知檔」時, 卡片狀態預設為已開卡; 1表未遞交, 2表未開卡, 3表已開卡(若是儲值卡, 才建議設成2)], [TbSysConfigInfo  sParm:INIT_MERCH_STATUS sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 匯入「特店通知檔」時，特店狀態預設為生效; 0表未生效, 1表生效], [TbSysConfigInfo  sParm:IS_CUST_ENCRIPT sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:TB_CUST是否要作加解密 1:是 / 0:否], [TbSysConfigInfo  sParm:KEY_GROUP_ID sValue:00000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:], [TbSysConfigInfo  sParm:LOSTCARDBALDAY sValue:4 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 掛失與損毀回饋檔往前推算天數], [TbSysConfigInfo  sParm:LPTSAM_CHECK_FLAG sValue:0 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O>關企版是否檢核LPTSAM總公司代碼,  0不檢核/1與未設定此PARM則需檢核], [TbSysConfigInfo  sParm:MAC_FALG sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O> MAC驗證測試], [TbSysConfigInfo  sParm:MASK sValue:A0B1C2D3E4F50A1B2C3D sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O>亂碼化遮罩字串(文數字20碼 每一組hexString中必須有1個為字母A~F)], [TbSysConfigInfo  sParm:MAX_DW_COUPON sValue:5 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:最大可下載COUPON個數], [TbSysConfigInfo  sParm:MAX_DW_POINT sValue:2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:最大可下載COUPON個數], [TbSysConfigInfo  sParm:ONLY_ALL_FLAG sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 清算/手續費只處理當天或全部已過檔的交易, 0表當天, 1表全部], [TbSysConfigInfo  sParm:ONL_TXN_ENT_FILTER sValue:'50000', '77000' sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<OU>巨城及大食代的總公司代碼。當巨城及大食代在查詢TB_ONL_TXN資料時，要過濾部份交易資料。], [TbSysConfigInfo  sParm:POINT_BAL_UPDATE_FLAG sValue:3 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O>晶片紅利: 點數不夠扣處理原則,1: 記錄負補登,2: 有多少扣多少(0),3: 有多少扣多少(F),4: 拒絕交易], [TbSysConfigInfo  sParm:REGEN_RCODE sValue:1007 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<U>踢退交易重匯-要重匯的錯誤代碼。], [TbSysConfigInfo  sParm:ROLLBACK_AFTER_REACH_QTY_LIMIT sValue:Y sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<Campaign>Y當負向交易時會重新計算設定REACH_MAX_FLAG], [TbSysConfigInfo  sParm:RPT_BATCH_DATE sValue:3 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R>Report執行批次報表的日期設定:1:當天交易,當天清算處理,當天產生報表(O),2:當天交易,當天清算處理,隔天產生報表(1),3:當天交易,隔天清算處理,隔天產生報表(2)], [TbSysConfigInfo  sParm:RPT_DATEFORMAT sValue:YMD sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 報表日期格式, 年月日的顯示順序], [TbSysConfigInfo  sParm:SCHEMA_VERSION sValue:2.2.7 sUptUserid: sUptDate:20170213 sUptTime:133920 sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:], [TbSysConfigInfo  sParm:SETTLE_EXPIRY_DATE sValue:45 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 批量匯入檔案判斷同一批交易結帳時間, 推算N天前已結帳但無交易檔], [TbSysConfigInfo  sParm:SETTLE_PARTITION sValue:2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 清算程式處理全部已過檔的交易時, 因為效能考量, 只處理N個Partition內的資料(N=2~12)], [TbSysConfigInfo  sParm:START_DATE sValue:00010101 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:永久有效開始日期], [TbSysConfigInfo  sParm:SVC_INIT_CARD_STATUS sValue:2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> SVC系統, 匯入「會員卡檔」時, 卡片狀態預設為已開卡; 1表未遞交, 2表未開卡, 3表已開卡(若是儲值卡, 才建議設成2)], [TbSysConfigInfo  sParm:SYS_START_DATE sValue:20141001 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:系統上線日], [TbSysConfigInfo  sParm:SYS_TYPE sValue:SVC sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B>判斷本系統是LMS or SVC], [TbSysConfigInfo  sParm:TERMINAL_IMPORT sValue:~/Upload/Terminal/ sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:端末機整批維護, 上傳端末機檔案用的根目錄], [TbSysConfigInfo  sParm:TOBE_STALL_MONTHS sValue:3 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:], [TbSysConfigInfo  sParm:TXN_SRC_A sValue:Adjustment sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 此交易來源顯示在報表上的名稱,調整交易], [TbSysConfigInfo  sParm:TXN_SRC_C sValue:Captured sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 此交易來源顯示在報表上的名稱,人工簽單], [TbSysConfigInfo  sParm:TXN_SRC_E sValue:EDC sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 顯示在報表上的名稱,EDC交易], [TbSysConfigInfo  sParm:TXN_SRC_L sValue:Batch sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 此交易來源顯示在報表上的名稱,指定回饋名單], [TbSysConfigInfo  sParm:TXN_SRC_P sValue:Batch sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 此交易來源顯示在報表上的名稱,指定加值], [TbSysConfigInfo  sParm:TXN_SRC_T sValue:Batch sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<R> 此交易來源顯示在報表上的名稱,餘額轉置], [TbSysConfigInfo  sParm:UNBAL_HANDLE_TYPE sValue:1 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 不平帳的後續處理方式; 1:以HOST為主, 2:以EDC為主, 3:人工決定], [TbSysConfigInfo  sParm:UNKNOWN_CARD_NO sValue:0000000000000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 匯入檔案/前置作業新增的交易, 因為無法得知卡號資訊, 統一填固定值], [TbSysConfigInfo  sParm:UNKNOWN_EXPIRY_DATE sValue:00000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 匯入檔案/前置作業新增的交易, 因為無法得知卡片效期資訊, 統一填固定值], [TbSysConfigInfo  sParm:UNKNOWN_MEMBER sValue:00000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 匯入檔案/前置作業新增的交易, 因為無法得知參加單位資訊, 統一填固定值], [TbSysConfigInfo  sParm:UNKNOWN_MERCH sValue:000000000000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 匯入檔案/前置作業新增的交易, 因為無法得知特店資訊, 統一填固定值], [TbSysConfigInfo  sParm:UNKNOWN_TERM sValue:00000000 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<B> 匯入檔案/前置作業新增的交易, 因為無法得知端末機資訊, 統一填固定值], [TbSysConfigInfo  sParm:WARRANTY sValue:24 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sPurposeDesc:<O> 保固期]]
[main] 20170622 09:42:20 DEBUG TbCenterMgr          L:963  - sql: SELECT ROWID, CENTER_ID, CENTER_NAME, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, LANGUAGE FROM TB_CENTER ORDER BY CENTER_ID
[main] 20170622 09:42:20 DEBUG TbCenterMgr          L:971  - TB_CENTER: 1 records exist
[main] 20170622 09:42:20 DEBUG TbCenterMgr          L:972  - [[TbCenterInfo  sCenterId:28472923 sCenterName:遠鑫營運中心 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sLanguage:TWN]]
[main] 20170622 09:42:20 INFO  FileTransferProcessor L:161  - retryCount: 1
[main] 20170622 09:42:20 INFO  FileTransferProcessor L:162  - retrySleep: 3000(ms)
[main] 20170622 09:42:20 DEBUG FileTransferProcessor L:168  - getBatchResultInfo().getJobId(): 100
[main] 20170622 09:42:20 DEBUG FileTransferProcessor L:169  - getBatchResultInfo().getJobTime(): 0001
[main] 20170622 09:42:20 DEBUG FileTransferProcessor L:170  - getBatchResultInfo().getMemId(): 
[main] 20170622 09:42:20 DEBUG FileTransferProcessor L:201  - jobMemSql: SELECT MEM_ID FROM TB_MEMBER WHERE 1=1 AND JOB_ID='100' AND JOB_TIME='0001'
[main] 20170622 09:42:20 WARN  SecureDataSource     L:135  - DBCP borrow connection time: 641 ms. YHDP_BATCH
[main] 20170622 09:42:20 DEBUG TbFtpInfoMgr         L:1119 - sql: SELECT ROWID, FILE_NAME, IN_OUT, FTP_IP, FTP_PORT, REMOTE_PATH, FTP_LOGIN_ID, FTP_LOGIN_PWD, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, FTP_WRAP_FLAG, FTP_WRAP_ENCRYPT_FLAG, FTP_WRAP_PWD, HOST_ID, FTP_PROTOCOL, FTP_BACKUP_PATH, FTP_BACKUP_FLAG, FTP_DEST_FLAG FROM TB_FTP_INFO WHERE in_out='I' and file_name in (select file_name from tb_file_info where in_out='I') ORDER BY FILE_NAME, IN_OUT, FTP_IP, FTP_PORT, REMOTE_PATH
[main] 20170622 09:42:20 DEBUG TbFtpInfoMgr         L:1127 - TB_FTP_INFO: 19 records exist
[main] 20170622 09:42:20 DEBUG TbFtpInfoMgr         L:1128 - [[TbFtpInfoInfo  sFileName:BARL sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:BKCD sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:BMEM sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:BTCB sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:CDRQ sInOut:I sFtpIp:10.10.10.101 sFtpPort:21 sRemotePath:/Hyweb/CDRQ/22222/00000000 sFtpLoginId:batchuser sFtpLoginPwd:4A6976372D4188FE381155C69E3DCE9B sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:0 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:CUST sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/CUST sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath: sFtpBackupFlag: sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:DTXN sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:ERPT sInOut:I sFtpIp:127.0.0.1 sFtpPort:8080 sRemotePath:/ERPT sFtpLoginId:localhost sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath: sFtpBackupFlag: sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:HGTOYHDP_HG sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:IMPTXNDTL sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:RESTOCKIN sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP/ sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:YHDP/SUC sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:STOCKIN sInOut:I sFtpIp:10.10.10.102 sFtpPort:22 sRemotePath:/home/etmall/CRD_HOST_BATCH/batch_file/temp_file/in/STOCKIN sFtpLoginId:etmall sFtpLoginPwd:7713186C3395CCDD2FC5E710293B831B sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath: sFtpBackupFlag:1 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:TEFD_CARPARK_ZIP sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP_MW/CARPARK/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:TEST sInOut:I sFtpIp:X sFtpPort:X sRemotePath:E:/TEST/00000000/ sFtpLoginId:X sFtpLoginPwd:X sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:X sFtpBackupPath: sFtpBackupFlag:1 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:TEST_E sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/UBNPC/imp/TXN/00000000/ sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath: sFtpBackupFlag:1 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:TEST_G sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/UBNPC/imp/TXN/22222/00000000/ sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath: sFtpBackupFlag:1 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:TEST_M sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/UBNPC/imp/TXN/22222/00000000/111111111111111 sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath: sFtpBackupFlag:1 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:TXNS_CARPARK_ZIP sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP_MW/CARPARK/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0], [TbFtpInfoInfo  sFileName:TXNS_TYRTC_ZIP sInOut:I sFtpIp:10.10.10.84 sFtpPort:22 sRemotePath:/home/batchuser/YHDP_MW/TYRTC/22222/00000000/UP sFtpLoginId:batchuser sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath:BK sFtpBackupFlag:2 sFtpDestFlag:0]]
[main] 20170622 09:42:20 INFO  FileTransferProcessor L:102  - ftpInfo: BARL
[main] 20170622 09:42:20 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'BARL' AND IN_OUT = 'I'
[main] 20170622 09:42:20 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:20 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:BARL sInOut:I]
[main] 20170622 09:42:20 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: BARL
[main] 20170622 09:42:20 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:21 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:21 INFO  FileTransferProcessor L:102  - ftpInfo: BKCD
[main] 20170622 09:42:21 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'BKCD' AND IN_OUT = 'I'
[main] 20170622 09:42:21 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:21 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:BKCD sInOut:I]
[main] 20170622 09:42:21 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: BKCD
[main] 20170622 09:42:21 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:102  - ftpInfo: BMEM
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'BMEM' AND IN_OUT = 'I'
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:BMEM sInOut:I]
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: BMEM
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:102  - ftpInfo: BTCB
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'BTCB' AND IN_OUT = 'I'
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:BTCB sInOut:I]
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: BTCB
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:22 WARN  LocalPathValidator   L:58   - remote path:/home/batchuser/YHDP/22222/00000000/UP/ contains 22222, 00000000 or 111111111111111, but local path:in/BTCB/ not contains!
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:22 INFO  FileTransferProcessor L:102  - ftpInfo: CDRQ
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'CDRQ' AND IN_OUT = 'I'
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:22 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:CDRQ sInOut:I]
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:255  - transferFiles.FTPUtil: CDRQ
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:258  - ftp login:10.10.10.101
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:297  - ftp logout and disconnect:10.10.10.101
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:102  - ftpInfo: CUST
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'CUST' AND IN_OUT = 'I'
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:CUST sInOut:I]
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: CUST
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:23 DEBUG TbFtpLogMgr          L:437  - sql: SELECT COUNT(*) FROM TB_FTP_LOG WHERE FULL_FILE_NAME = 'CUST.2015030901' AND IN_OUT = 'I' AND FTP_IP = '10.10.10.84' AND REMOTE_PATH = '/home/batchuser/YHDP/CUST/' AND LOCAL_PATH = 'batch_file/temp_file/in/CUST/' AND STATUS = '1'
[main] 20170622 09:42:23 DEBUG TbFtpLogMgr          L:443  - TB_FTP_LOG: 1 records exist
[main] 20170622 09:42:23 WARN  FileTransferProcessor L:349  - CUST.2015030901 already transfered! local path:batch_file/temp_file/in/CUST/ remote path:/home/batchuser/YHDP/CUST/ direction:I
[main] 20170622 09:42:23 DEBUG TbFtpLogMgr          L:437  - sql: SELECT COUNT(*) FROM TB_FTP_LOG WHERE FULL_FILE_NAME = 'CUST.2014080801' AND IN_OUT = 'I' AND FTP_IP = '10.10.10.84' AND REMOTE_PATH = '/home/batchuser/YHDP/CUST/' AND LOCAL_PATH = 'batch_file/temp_file/in/CUST/' AND STATUS = '1'
[main] 20170622 09:42:23 DEBUG TbFtpLogMgr          L:443  - TB_FTP_LOG: 1 records exist
[main] 20170622 09:42:23 WARN  FileTransferProcessor L:349  - CUST.2014080801 already transfered! local path:batch_file/temp_file/in/CUST/ remote path:/home/batchuser/YHDP/CUST/ direction:I
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:102  - ftpInfo: DTXN
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'DTXN' AND IN_OUT = 'I'
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:DTXN sInOut:I]
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: DTXN
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:102  - ftpInfo: ERPT
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'ERPT' AND IN_OUT = 'I'
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:23 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:ERPT sInOut:I]
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: ERPT
[main] 20170622 09:42:23 INFO  FileTransferProcessor L:314  - ftp login:127.0.0.1
[main] 20170622 09:42:24 INFO  FileTransferProcessor L:319  - Sleep: 3000(ms)
[main] 20170622 09:42:27 INFO  FileTransferProcessor L:321  - Connect retry: 1
[main] 20170622 09:42:28 WARN  FileTransferProcessor L:117  - exception when handle this ftp info:[TbFtpInfoInfo  sFileName:ERPT sInOut:I sFtpIp:127.0.0.1 sFtpPort:8080 sRemotePath:/ERPT/ sFtpLoginId:localhost sFtpLoginPwd:D172D50BFB00AF960954DE36A4F074D2 sUptUserid: sUptDate: sUptTime: sAprvUserid: sAprvDate: sAprvTime: sFtpWrapFlag:0 sFtpWrapEncryptFlag:0 sFtpWrapPwd: sHostId:0 sFtpProtocol:1 sFtpBackupPath: sFtpBackupFlag: sFtpDestFlag:0]
java.lang.Exception: ftp connect fail:127.0.0.1
	at tw.com.hyweb.core.ftp.batch.framework.ftp.FileTransferProcessor.transferFiles(FileTransferProcessor.java:327)
	at tw.com.hyweb.core.ftp.batch.framework.ftp.FileTransferProcessor.transferFiles(FileTransferProcessor.java:241)
	at tw.com.hyweb.core.ftp.batch.framework.ftp.FileTransferProcessor.process(FileTransferProcessor.java:109)
	at tw.com.hyweb.core.ftp.batch.framework.AbstractBatchBasic.run(AbstractBatchBasic.java:102)
	at tw.com.hyweb.core.ftp.batch.framework.ftp.FtpIn.main(FtpIn.java:43)
[main] 20170622 09:42:28 INFO  FileTransferProcessor L:102  - ftpInfo: HGTOYHDP_HG
[main] 20170622 09:42:28 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'HGTOYHDP_HG' AND IN_OUT = 'I'
[main] 20170622 09:42:28 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:28 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:HGTOYHDP_HG sInOut:I]
[main] 20170622 09:42:28 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: HGTOYHDP_HG
[main] 20170622 09:42:28 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:29 WARN  LocalPathValidator   L:58   - remote path:/home/batchuser/YHDP/22222/00000000/UP/ contains 22222, 00000000 or 111111111111111, but local path:in/HGTOYHDP_HG/00041/00041056/UP not contains!
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:102  - ftpInfo: IMPTXNDTL
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'IMPTXNDTL' AND IN_OUT = 'I'
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:IMPTXNDTL sInOut:I]
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: IMPTXNDTL
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:102  - ftpInfo: RESTOCKIN
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'RESTOCKIN' AND IN_OUT = 'I'
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:RESTOCKIN sInOut:I]
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: RESTOCKIN
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:29 WARN  TransferUtil         L:229  - directory not exist or no fit file name of file name pattern!: /home/batchuser/YHDP/
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:102  - ftpInfo: STOCKIN
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'STOCKIN' AND IN_OUT = 'I'
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:29 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:STOCKIN sInOut:I]
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: STOCKIN
[main] 20170622 09:42:29 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.102
[main] 20170622 09:42:30 WARN  TransferUtil         L:229  - directory not exist or no fit file name of file name pattern!: /home/etmall/CRD_HOST_BATCH/batch_file/temp_file/in/STOCKIN/
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.102
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:102  - ftpInfo: TEFD_CARPARK_ZIP
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'TEFD_CARPARK_ZIP' AND IN_OUT = 'I'
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:TEFD_CARPARK_ZIP sInOut:I]
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: TEFD_CARPARK_ZIP
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:102  - ftpInfo: TEST
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'TEST' AND IN_OUT = 'I'
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:TEST sInOut:I]
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:433  - Local TransferFiles: TEST
[main] 20170622 09:42:30 WARN  DownloadStrategy     L:332  - change directory failure:E:/TEST/
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:102  - ftpInfo: TEST_E
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'TEST_E' AND IN_OUT = 'I'
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:TEST_E sInOut:I]
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: TEST_E
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:102  - ftpInfo: TEST_G
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'TEST_G' AND IN_OUT = 'I'
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:TEST_G sInOut:I]
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: TEST_G
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:102  - ftpInfo: TEST_M
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'TEST_M' AND IN_OUT = 'I'
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:TEST_M sInOut:I]
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: TEST_M
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:102  - ftpInfo: TXNS_CARPARK_ZIP
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'TXNS_CARPARK_ZIP' AND IN_OUT = 'I'
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:30 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:TXNS_CARPARK_ZIP sInOut:I]
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: TXNS_CARPARK_ZIP
[main] 20170622 09:42:30 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:31 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:31 INFO  FileTransferProcessor L:102  - ftpInfo: TXNS_TYRTC_ZIP
[main] 20170622 09:42:31 DEBUG TbFileInfoMgr        L:253  - sql: SELECT ROWID, FILE_NAME, IN_OUT, FILE_TYPE, DATA_LEN, FILE_NAME_PATTERN, LOCAL_PATH, UPT_USERID, UPT_DATE, UPT_TIME, APRV_USERID, APRV_DATE, APRV_TIME, OK_FLAG, SUB_FILE_NAME, RETURN_FILE_NAME, CIPHER_FLAG, KEY_WORD FROM TB_FILE_INFO WHERE FILE_NAME = 'TXNS_TYRTC_ZIP' AND IN_OUT = 'I'
[main] 20170622 09:42:31 DEBUG TbFileInfoMgr        L:266  - TB_FILE_INFO: 1 records exist
[main] 20170622 09:42:31 DEBUG TbFileInfoMgr        L:267  - [TbFileInfoPK  sFileName:TXNS_TYRTC_ZIP sInOut:I]
[main] 20170622 09:42:31 INFO  FileTransferProcessor L:311  - transferFiles.SFTPUtil: TXNS_TYRTC_ZIP
[main] 20170622 09:42:31 INFO  FileTransferProcessor L:314  - ftp login:10.10.10.84
[main] 20170622 09:42:31 INFO  FileTransferProcessor L:358  - ftp logout and disconnect:10.10.10.84
[main] 20170622 09:42:31 DEBUG TbBatchResultMgr     L:147  - sql: UPDATE TB_BATCH_RESULT SET END_DATE = '20170622', END_TIME = '094231', WORK_FLAG = '1', RCODE = '2001', ERROR_DESC = '', PAR_MON = '06', PAR_DAY = '22', LINK_CONTROL = 'N', MEM_ID = '', RECOVER_VALUE = '' WHERE PROGRAM_NAME = 'FtpIn' AND START_DATE = '20170622' AND START_TIME = '094213' AND JOB_ID = '100' AND JOB_TIME = '0001'
[main] 20170622 09:42:31 DEBUG TbBatchResultMgr     L:151  - TB_BATCH_RESULT: 1 record updated
[main] 20170622 09:42:31 DEBUG TbBatchResultMgr     L:152  - [TbBatchResultInfo  sProgramName:FtpIn sStartDate:20170622 sStartTime:094213 sEndDate:20170622 sEndTime:094231 sWorkFlag:1 sRcode:2001 sErrorDesc: sParMon:06 sParDay:22 sLinkControl:N sJobId:100 sJobTime:0001 sMemId: sRecoverValue:]
[main] 20170622 09:42:31 INFO  AbstractBatchBasic   L:138  - end running

